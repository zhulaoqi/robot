# 📚 项目文档

欢迎查阅 Robot 项目文档！

## 📋 文档目录

### [API 文档](API.md)

完整的 REST API 接口文档，包括：

- ✅ 所有接口的请求和响应格式
- ✅ 参数说明和示例
- ✅ 错误处理和状态码
- ✅ 最佳实践和使用建议

### [快速开始](../README.md#-快速开始)

快速部署和运行项目的指南。

### [功能特性](../README.md#-功能特性)

详细了解项目的核心功能。

## 🔧 技术细节

### 架构设计

项目采用分层架构设计：

```
表示层 (Controller) 
    ↓
业务层 (Service)
    ↓
框架层 (Langchain4j)
    ↓
数据层 (MySQL) + 外部服务 (AI API)
```

### RAG 工作流程

1. **文档加载** - 读取知识文档
2. **文档分割** - 切分为小片段（500-1000字符）
3. **向量化** - 使用 Embedding 模型转换为向量
4. **存储** - 保存到 MySQL 向量表
5. **检索** - 用户提问时搜索相似片段
6. **生成** - 将检索结果注入 AI 上下文

### Text-to-SQL 实现

```
用户问题 → 向量检索表结构 → 构建 Prompt → AI 生成 SQL → 执行查询 → 返回结果
```

### 工具调用机制

```java
@Tool("工具描述")
public String toolMethod(@P("参数说明") String param) {
    // AI 会根据用户意图自动调用
    return "结果";
}
```

## 💡 使用场景

### 1. 企业知识库

- 上传公司文档到知识库
- 员工通过对话查询信息
- 自动回答常见问题

### 2. 数据库查询助手

- 非技术人员用自然语言查询数据
- 自动生成复杂 SQL
- 降低数据分析门槛

### 3. 智能客服

- 24/7 自动响应
- 记忆历史对话
- 调用外部工具完成任务

## 🚀 性能优化

### 向量检索优化

- 限制知识库规模（< 10000 条）
- 使用合适的相似度阈值（0.3-0.6）
- 考虑迁移到专业向量数据库

### Token 优化

- 限制对话历史窗口（3-5 轮）
- 控制 RAG 检索结果数（5-10 条）
- 优化文档分割大小

### 并发处理

- 使用线程池处理批量请求
- 实现请求队列
- 添加限流机制

## 📊 监控指标

建议监控的关键指标：

- 响应时间
- API 调用成功率
- 向量检索准确率
- 数据库连接池状态
- 内存使用情况

## 🔐 安全建议

1. **API Key 管理**
   - 使用环境变量
   - 不要提交到代码仓库
   - 定期轮换密钥

2. **访问控制**
   - 添加用户认证
   - 实现权限管理
   - 记录操作日志

3. **数据安全**
   - 敏感数据加密存储
   - SQL 注入防护
   - 定期备份数据

## ❓ FAQ

### Q: 如何扩展到其他大模型？

只需修改配置文件中的 `base-url` 和 `api-key`，Langchain4j 兼容 OpenAI 格式的所有模型。

### Q: 支持多语言吗？

支持，通义千问支持多种语言。只需在系统提示词中指定语言即可。

### Q: 如何备份数据？

```bash
mysqldump -u root -p langchain_db > backup.sql
```

### Q: 如何清理过期对话记录？

```sql
DELETE FROM chat_memory WHERE created_time < DATE_SUB(NOW(), INTERVAL 30 DAY);
```

## 📞 获取帮助

- 📮 [GitHub Issues](https://github.com/zhulaoqi/robot/issues)
- 📧 Email: 1647110340@qq.com
- ⭐ [Star 项目](https://github.com/zhulaoqi/robot)

---

**文档版本**: v1.0  
**最后更新**: 2024-11-15

